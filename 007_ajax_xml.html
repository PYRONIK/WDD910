<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <script>
      
      function parseXML(XML){
        
        console.log(XML);
        
        document.getElementById('anmeldungen').innerHTML = '';
        
        var items = XML.getElementsByTagName('item');
        
        for(var i = 0; i < items.length; i++){
          
          var name = items[i].getElementsByTagName('name')[0].firstChild.nodeValue;
          var email = items[i].getElementsByTagName('email')[0].firstChild.nodeValue;
          
          
          //var zeile = '<tr><td>'+ name +'</td><td>'+ email +'</td></tr>';

          
          
          
          var tr = document.createElement('tr');
          
              tr.onmouseover= function(){
                
                this.style.backgroundColor = 'red';
              }
              
              tr.onmouseout = function(){
                this.style.backgroundColor = '';
              }
              
              tr.onclick = function(){
                
                this.delxhr = new XMLHttpRequest();
                
                this.delxhr.open('POST','server/loeschscript.php', true);
                
                this.delxhr.that = this;
                
                
                this.delxhr.onreadystatechange = function(){
                  
                  if(this.readyState == 4){
                    this.that.parentNode.removeChild(this.that);
                  }
                  
                }
                
            var email = this.getElementsByTagName('td')[1].innerHTML
            
            this.delxhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            this.delxhr.send('email='+email);
                
                
                
                
                
              }
          
          var td = document.createElement('td');
              td.appendChild(document.createTextNode(name));
              
              tr.appendChild(td);
              
              td = document.createElement('td');
              td.appendChild(document.createTextNode(email));
              
              tr.appendChild(td);
              
             document.getElementById('anmeldungen').appendChild(tr);
        }
        
      }
      
      window.onload = function(){
        
        document.getElementById('aktualisieren').onclick = function(){
          
          var request = new XMLHttpRequest();
          
          request.open('GET','adressen.xml', true);
          
          request.onreadystatechange = function(){
            
            if(request.readyState ==1){
              
            document.getElementById('info').innerHTML = 'loading...'
              
            }
            
            if(request.readyState == 4 && request.status == 200){
              
              document.getElementById('info').innerHTML = '';
              
              parseXML(request.responseXML.documentElement);

            }
          
          }
          
          request.send(null);
        }
        
        
      }
      
    </script>
    
  </head>

  <body>
    
    <span id="info"></span>
   
    <table id ="anmeldungen">
      
    </table>
    
    <a href="#" id="aktualisieren">Aktualisieren</a>

  </body>
</html>